(function(){"use strict";var e={4024:function(e,s,a){var t=a(9242),r=a(6265),n=a.n(r),i=a(3396);const o={class:"content"};function l(e,s,a,t,r,n){const l=(0,i.up)("nav-bar"),c=(0,i.up)("router-view"),u=(0,i.up)("footer-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",o,[(0,i.Wm)(l),(0,i.Wm)(c)]),(0,i.Wm)(u)],64)}var c=a(7139);const u=e=>((0,i.dD)("data-v-098cfce7"),e=e(),(0,i.Cn)(),e),d={class:"nav nav--tours"},_=(0,i.Uk)("All Tours"),g=u((()=>(0,i._)("div",{class:"header__logo"},[(0,i._)("img",{src:"https://natours-api-production-dbe8.up.railway.app/img/logo-white.png",alt:"NatourLogo"})],-1))),m={key:0,class:"nav nav--user"},p=(0,i.Uk)("Log out"),v=["src"],w={key:1},h=(0,i.Uk)("Log in"),f=(0,i.Uk)("Sign up"),b={class:"icon"},k={key:0,class:"dropdown-nav"},y=(0,i.Uk)("Log out"),x=["src"],D={key:1},S=(0,i.Uk)("Log in"),M=(0,i.Uk)("Sign up");function U(e,s,a,r,n,o){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",{class:(0,c.C_)(["header",{"scroll-nav":n.scrollPosition}])},[(0,i._)("nav",d,[(0,i.Wm)(l,{class:"nav__el",to:{name:"home"}},{default:(0,i.w5)((()=>[_])),_:1})]),g,n.mobile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("nav",m,[e.authenticated?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(l,{class:"nav__el nav__el--logout",to:{name:"home"},onClick:(0,t.iM)(o.signOut,["prevent"])},{default:(0,i.w5)((()=>[p])),_:1},8,["onClick"]),(0,i.Wm)(l,{class:"nav__el",to:{name:"userdetails"}},{default:(0,i.w5)((()=>[(0,i._)("img",{src:`/images/users/${e.user.photo}`,alt:"1",class:"nav__user-img"},null,8,v),(0,i._)("span",null,(0,c.zw)(e.user.name.split(" ")[0].toUpperCase()),1)])),_:1})],64)):(0,i.kq)("",!0),e.authenticated?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",w,[(0,i.Wm)(l,{class:"nav__el",to:{name:"login"}},{default:(0,i.w5)((()=>[h])),_:1}),(0,i.Wm)(l,{class:"nav__el nav__el--cta",to:{name:"signup"}},{default:(0,i.w5)((()=>[f])),_:1})]))])),(0,i._)("div",b,[n.mobile?((0,i.wg)(),(0,i.iD)("span",{key:0,onClick:s[0]||(s[0]=(...e)=>o.toggleMobileNav&&o.toggleMobileNav(...e)),class:(0,c.C_)(["material-icons",{"icon-active":n.mobileNav}])},"menu",2)):(0,i.kq)("",!0)]),(0,i.Wm)(t.uT,{name:"mobile-nav"},{default:(0,i.w5)((()=>[n.mobileNav?((0,i.wg)(),(0,i.iD)("nav",k,[e.authenticated?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(l,{class:"nav__el nav__el--logout",to:{name:"home"},onClick:(0,t.iM)(o.signOut,["prevent"])},{default:(0,i.w5)((()=>[y])),_:1},8,["onClick"]),(0,i.Wm)(l,{class:"nav__el",to:{name:"userdetails"}},{default:(0,i.w5)((()=>[(0,i._)("img",{src:`/images/users/${e.user.photo}`,alt:"1",class:"nav__user-img"},null,8,x),(0,i._)("span",null,(0,c.zw)(e.user.name.split(" ")[0].toUpperCase()),1)])),_:1})],64)):(0,i.kq)("",!0),e.authenticated?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",D,[(0,i.Wm)(l,{class:"nav__el",to:{name:"login"}},{default:(0,i.w5)((()=>[S])),_:1}),(0,i.Wm)(l,{class:"nav__el nav__el--cta",to:{name:"signup"}},{default:(0,i.w5)((()=>[M])),_:1})]))])):(0,i.kq)("",!0)])),_:1})],2)}var z=a(65),C={name:"NavBar",props:["tours"],data(){return{scrollPosition:null,mobile:null,mobileNav:null,windowWidth:null}},created(){window.addEventListener("resize",this.checkScreen),this.checkScreen()},computed:{...(0,z.Se)({authenticated:"auth/authenticated",user:"auth/user"})},methods:{...(0,z.nv)({signOutAction:"auth/signOut"}),signOut(){this.signOutAction().then((()=>{this.$router.replace({name:"login"})}))},toggleMobileNav(){this.mobileNav=!this.mobileNav},checkScreen(){this.windowWidth=window.innerWidth,this.windowWidth<=600?this.mobile=!0:(this.mobile=!1,this.mobileNav=!1)}}},q=a(89);const E=(0,q.Z)(C,[["render",U],["__scopeId","data-v-098cfce7"]]);var P=E;const T={class:"footer"},O=(0,i.uE)('<div class="footer__logo"><img src="https://natours-api-production-dbe8.up.railway.app/img/logo-white.png" alt="Natours logo"></div><ul class="footer__nav"><li><a href="#">About us</a></li><li><a href="#">Download apps</a></li><li><a href="#">Become a guide</a></li><li><a href="#">Careers</a></li><li><a href="#">Contact</a></li></ul><p class="footer__copyright"> © by Jonas Schmedtmann. All rights reserved. </p>',3),N=[O];function W(e,s,a,t,r,n){return(0,i.wg)(),(0,i.iD)("div",T,N)}var $={name:"FooterView",data(){return{}}};const A=(0,q.Z)($,[["render",W]]);var Z=A,I={name:"App",components:{NavBar:P,FooterView:Z},data(){return{}},methods:{}};const L=(0,q.Z)(I,[["render",l],["__scopeId","data-v-7adbb220"]]);var V=L,Y=a(9907);(0,Y.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var R=a(2483);function K(e,s,a,t,r,n){const o=(0,i.up)("all-tours");return(0,i.wg)(),(0,i.j4)(o)}const H={class:"main"},j={key:0,class:"card-container"},F={class:"card__header"},B={class:"card__picture"},G=(0,i._)("div",{class:"card__picture-overlay"}," ",-1),Q=["src","alt"],J={class:"heading-tertirary"},X={class:"card__details"},ee={class:"card__sub-heading"},se={class:"card__text"},ae={class:"card__data"},te=(0,i._)("svg",{class:"card__icon"},[(0,i._)("use",{"xlink:href":"images/icons.svg#icon-map-pin"})],-1),re={class:"card__data"},ne=(0,i._)("svg",{class:"card__icon"},[(0,i._)("use",{"xlink:href":"images/icons.svg#icon-calendar"})],-1),ie={class:"card__data"},oe=(0,i._)("svg",{class:"card__icon"},[(0,i._)("use",{"xlink:href":"images/icons.svg#icon-flag"})],-1),le={class:"card__data"},ce=(0,i._)("svg",{class:"card__icon"},[(0,i._)("use",{"xlink:href":"images/icons.svg#icon-user"})],-1),ue={class:"card__footer"},de={class:"card__footer-value"},_e=(0,i._)("span",{class:"card__footer-text"}," per person",-1),ge={class:"card__ratings"},me={class:"card__footer-value"},pe={class:"card__footer-text"},ve=(0,i.Uk)("Details");function we(e,s,a,t,r,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("main",H,[r.tours.length?((0,i.wg)(),(0,i.iD)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tours,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"card",key:e._id},[(0,i._)("div",F,[(0,i._)("div",B,[G,(0,i._)("img",{src:`/images/tours/${e.imageCover}`,alt:e.name,class:"card__picture-img"},null,8,Q)]),(0,i._)("h3",J,[(0,i._)("span",null,(0,c.zw)(e.name),1)])]),(0,i._)("div",X,[(0,i._)("h4",ee,(0,c.zw)(e.difficulty)+" "+(0,c.zw)(e.duration)+"-day tour",1),(0,i._)("p",se,(0,c.zw)(e.summary),1),(0,i._)("div",ae,[te,(0,i._)("span",null,(0,c.zw)(e.startLocation.description),1)]),(0,i._)("div",re,[ne,(0,i._)("span",null,(0,c.zw)(e.startDates[0].toLocaleString("us",{month:"long",year:"numeric"})),1)]),(0,i._)("div",ie,[oe,(0,i._)("span",null,(0,c.zw)(e.locations.length)+" stops",1)]),(0,i._)("div",le,[ce,(0,i._)("span",null,(0,c.zw)(e.maxGroupSize)+" people",1)])]),(0,i._)("div",ue,[(0,i._)("p",null,[(0,i._)("span",de,(0,c.zw)(e.price),1),_e]),(0,i._)("p",ge,[(0,i._)("span",me,(0,c.zw)(e.ratingsAverage),1),(0,i._)("span",pe," rating ("+(0,c.zw)(e.ratingsQuantity)+")",1)]),(0,i.Wm)(o,{to:{name:"tourdetails",params:{id:e._id}},class:"btn btn--green btn--small"},{default:(0,i.w5)((()=>[ve])),_:2},1032,["to"])])])))),128))])):(0,i.kq)("",!0)])}var he={name:"AllTours",data(){return{tours:[]}},async created(){try{const e=await n().get("tours");console.log(e.data.data.data);const{data:s}=e.data.data;this.tours=s}catch(e){e.value=e.message}}};const fe=(0,q.Z)(he,[["render",we]]);var be=fe,ke={components:{AllTours:be},name:"HomeView"};const ye=(0,q.Z)(ke,[["render",K]]);var xe=ye;const De=e=>((0,i.dD)("data-v-1f41e408"),e=e(),(0,i.Cn)(),e),Se={key:0,class:"section-header"},Me={class:"header__hero"},Ue=De((()=>(0,i._)("div",{class:"header__hero-overlay"}," ",-1))),ze=["src"],Ce={class:"heading-box"},qe={class:"heading-primary"},Ee=De((()=>(0,i._)("br",null,null,-1))),Pe={class:"heading-box__group"},Te={class:"heading-box__detail"},Oe=De((()=>(0,i._)("svg",{class:"heading-box__icon"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-clock"})],-1))),Ne={class:"heading-box__text"},We={class:"heading-box__detail"},$e=De((()=>(0,i._)("svg",{class:"heading-box__icon"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-map-pin"})],-1))),Ae={class:"heading-box__text"},Ze={class:"section-description"},Ie={class:"overview-box"},Le={class:"overview-box__group"},Ve=De((()=>(0,i._)("h2",{class:"heading-secondary ma-bt-lg"},"Quick facts",-1))),Ye={class:"overview-box__detail"},Re=De((()=>(0,i._)("svg",{class:"overview-box__icon"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-calendar"})],-1))),Ke=De((()=>(0,i._)("span",{class:"overview-box__label"},"Next date",-1))),He={class:"overview-box__text"},je={class:"overview-box__detail"},Fe=De((()=>(0,i._)("svg",{class:"overview-box__icon"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-trending-up"})],-1))),Be=De((()=>(0,i._)("span",{class:"overview-box__label"},"Difficulty",-1))),Ge={class:"overview-box__text"},Qe={class:"overview-box__detail"},Je=De((()=>(0,i._)("svg",{class:"overview-box__icon"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-user"})],-1))),Xe=De((()=>(0,i._)("span",{class:"overview-box__label"},"Participants",-1))),es={class:"overview-box__text"},ss={class:"overview-box__detail"},as=De((()=>(0,i._)("svg",{class:"overview-box__icon"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-star"})],-1))),ts=De((()=>(0,i._)("span",{class:"overview-box__label"},"Rating",-1))),rs={class:"overview-box__text"},ns={class:"overview-box__group"},is=De((()=>(0,i._)("h2",{class:"heading-secondary ma-bt-lg"},"Your tour guides",-1))),os=["src"],ls={key:0,class:"overview-box__label"},cs={key:1,class:"overview-box__label"},us={class:"overview-box__text"},ds={class:"description-box"},_s={class:"heading-secondary ma-bt-lg"},gs={class:"description__text"},ms=De((()=>(0,i._)("p",{class:"description__text"},null,-1))),ps={class:"section-pictures"},vs=["src","alt"],ws=De((()=>(0,i._)("section",{class:"section-map"},[(0,i._)("div",{class:"mapouter"},[(0,i._)("div",{class:"gmap_canvas"},[(0,i._)("iframe",{width:"600",height:"500",id:"gmap_canvas",src:"https://maps.google.com/maps?q=2880%20Broadway,%20New%20York&t=&z=13&ie=UTF8&iwloc=&output=embed",frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"}),(0,i._)("a",{href:"https://123movies-to.org"}),(0,i._)("br"),(0,i._)("a",{href:"https://www.embedgooglemap.net"},"google maps on website")])])],-1))),hs={class:"section-reviews"},fs={class:"reviews"},bs={key:0,class:"reviews__avatar"},ks=["src","alt"],ys={class:"reviews__user"},xs={class:"reviews__text"},Ds=(0,i.uE)('<div class="reviews__rating" data-v-1f41e408><svg class="reviews__star reviews__star--active" data-v-1f41e408><use xlink:href="/images/icons.svg#icon-star" data-v-1f41e408></use></svg><svg class="reviews__star reviews__star--active" data-v-1f41e408><use xlink:href="/images/icons.svg#icon-star" data-v-1f41e408></use></svg><svg class="reviews__star reviews__star--active" data-v-1f41e408><use xlink:href="/images/icons.svg#icon-star" data-v-1f41e408></use></svg><svg class="reviews__star reviews__star--active" data-v-1f41e408><use xlink:href="/images/icons.svg#icon-star" data-v-1f41e408></use></svg><svg class="reviews__star reviews__star--active" data-v-1f41e408><use xlink:href="/images/icons.svg#icon-star" data-v-1f41e408></use></svg></div>',1),Ss={class:"section-cta"},Ms={class:"cta"},Us=De((()=>(0,i._)("div",{class:"cta__img cta__img--logo"},[(0,i._)("img",{src:"/images/logo-white.png",alt:"Natours logo"})],-1))),zs=["src"],Cs=["src"],qs={class:"cta__content"},Es=De((()=>(0,i._)("h2",{class:"heading-secondary"},"What are you waiting for?",-1))),Ps={class:"cta__text"},Ts=(0,i.Uk)("LOG IN TO BOOK TOUR NOW");function Os(e,s,a,t,r,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[r.tour?((0,i.wg)(),(0,i.iD)("section",Se,[(0,i._)("div",Me,[Ue,(0,i._)("img",{src:`/images/tours/${r.tour.imageCover}`,alt:"",class:"header__hero-img"},null,8,ze)]),(0,i._)("div",Ce,[(0,i._)("h1",qe,[(0,i._)("span",null,[(0,i.Uk)((0,c.zw)(r.tour.name),1),Ee])]),(0,i._)("div",Pe,[(0,i._)("div",Te,[Oe,(0,i._)("span",Ne,(0,c.zw)(r.tour.duration)+" Days",1)]),(0,i._)("div",We,[$e,(0,i._)("span",Ae,(0,c.zw)(r.tour.startLocation.description),1)])])])])):(0,i.kq)("",!0),(0,i._)("section",Ze,[(0,i._)("div",Ie,[(0,i._)("div",null,[(0,i._)("div",Le,[Ve,(0,i._)("div",Ye,[Re,Ke,(0,i._)("span",He,(0,c.zw)(r.tour.startDates[0].toLocaleString("us",{month:"long",year:"numeric"})),1)]),(0,i._)("div",je,[Fe,Be,(0,i._)("span",Ge,(0,c.zw)(r.tour.difficulty),1)]),(0,i._)("div",Qe,[Je,Xe,(0,i._)("span",es,(0,c.zw)(r.tour.maxGroupSize)+" people",1)]),(0,i._)("div",ss,[as,ts,(0,i._)("span",rs,(0,c.zw)(r.tour.ratingsAverage)+" / 5",1)])]),(0,i._)("div",ns,[is,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tour.guides,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"overview-box__detail",key:e._id},[(0,i._)("img",{src:`/images/users/${e.photo}`,alt:"Lead gui",class:"overview-box__img"},null,8,os),"lead-guide"===e.role?((0,i.wg)(),(0,i.iD)("span",ls,(0,c.zw)(e.role),1)):(0,i.kq)("",!0),"guide"===e.role?((0,i.wg)(),(0,i.iD)("span",cs,"Tour-guides")):(0,i.kq)("",!0),(0,i._)("span",us,(0,c.zw)(e.name),1)])))),128))])])]),(0,i._)("div",ds,[(0,i._)("h2",_s,"About "+(0,c.zw)(r.tour.name),1),(0,i._)("p",gs,(0,c.zw)(r.tour.description),1),ms])]),(0,i._)("section",ps,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tour.images,((e,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"picture-box",key:e.name},[(0,i._)("img",{class:(0,c.C_)([`picture-box__img--${s+1}`,"picture-box__img"]),src:`/images/tours/${e}`,alt:`The Park Camper Tour ${s+1}`},null,10,vs)])))),128))]),ws,(0,i._)("section",hs,[(0,i._)("div",fs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tour.reviews,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"reviews__card",key:e._id},[e.user?((0,i.wg)(),(0,i.iD)("div",bs,[(0,i._)("img",{src:`/images/users/${e.user.photo}`,alt:e.user.name,class:"reviews__avatar-img"},null,8,ks),(0,i._)("h6",ys,(0,c.zw)(e.user.name),1)])):(0,i.kq)("",!0),(0,i._)("p",xs,(0,c.zw)(e.review),1),Ds])))),128))])]),(0,i._)("section",Ss,[(0,i._)("div",Ms,[Us,(0,i._)("img",{src:`/images/tours/${r.tour.images[1]}`,alt:"",class:"cta__img cta__img--1"},null,8,zs),(0,i._)("img",{src:`/images/tours/${r.tour.images[2]}`,alt:"",class:"cta__img cta__img--2"},null,8,Cs),(0,i._)("div",qs,[Es,(0,i._)("p",Ps,(0,c.zw)(r.tour.duration)+" days. 1 adventure. Infinite memories. Make it yours today! ",1),e.authenticated?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn--green span-all-rows",onClick:s[0]||(s[0]=s=>e.submit(r.tour._id))},"Book tour now!")):(0,i.kq)("",!0),e.authenticated?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(o,{key:1,to:{name:"login"},class:"btn btn--green span-all-rows"},{default:(0,i.w5)((()=>[Ts])),_:1}))])])])],64)}var Ns=a(5433),Ws={name:"TourDetails",beforeRouteEnter(e,s,a){Ns.Z.state.token?a():a({name:"login"})},data(){return{tour:{}}},computed:{...(0,z.Se)({authenticated:"auth/authenticated",user:"auth/user"})},async created(){try{const e=await n().get(`tours/${this.$route.params.id}`),{data:s}=e.data.data;this.tour=s,console.log(this.tour)}catch(e){console.log(e)}}};const $s=(0,q.Z)(Ws,[["render",Os],["__scopeId","data-v-1f41e408"]]);var As=$s;const Zs=e=>((0,i.dD)("data-v-0c0d218d"),e=e(),(0,i.Cn)(),e),Is={class:"main"},Ls={class:"login-form"},Vs=Zs((()=>(0,i._)("h2",{class:"heading-secondary ma-bt-lg"},"Log Into Your Account",-1))),Ys={key:0,class:"alert alert--error"},Rs={key:1,class:"alert alert--success"},Ks={class:"form__group"},Hs=Zs((()=>(0,i._)("label",{class:"form__label",for:"email"},"Email address",-1))),js={class:"form__group"},Fs=Zs((()=>(0,i._)("label",{class:"form__label",for:"password"},"Password",-1))),Bs={class:"form__group"},Gs={key:0,class:"btn btn--green",disabled:""},Qs={key:1,class:"btn btn--green"};function Js(e,s,a,r,n,o){return(0,i.wg)(),(0,i.iD)("main",Is,[(0,i._)("div",Ls,[Vs,n.errMessage?((0,i.wg)(),(0,i.iD)("div",Ys,(0,c.zw)(n.errMessage),1)):(0,i.kq)("",!0),n.sucMessage?((0,i.wg)(),(0,i.iD)("div",Rs,(0,c.zw)(n.sucMessage),1)):(0,i.kq)("",!0),(0,i._)("form",{class:"form form--login",onSubmit:s[2]||(s[2]=(0,t.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,i._)("div",Ks,[Hs,(0,i.wy)((0,i._)("input",{class:"form__input",type:"email",placeholder:"Email","onUpdate:modelValue":s[0]||(s[0]=e=>n.form.email=e),required:""},null,512),[[t.nr,n.form.email]])]),(0,i._)("div",js,[Fs,(0,i.wy)((0,i._)("input",{class:"form__input",type:"password",placeholder:"••••••••","onUpdate:modelValue":s[1]||(s[1]=e=>n.form.password=e),required:""},null,512),[[t.nr,n.form.password]])]),(0,i._)("div",Bs,[n.pending?((0,i.wg)(),(0,i.iD)("button",Gs,(0,c.zw)(n.pending),1)):((0,i.wg)(),(0,i.iD)("button",Qs,"Log in"))])],32)])])}var Xs={name:"LoginView",data(){return{form:{email:"",password:""},errMessage:"",sucMessage:"",pending:""}},methods:{...(0,z.nv)({signIn:"auth/signIn"}),async handleSubmit(){this.pending="Loading....",await this.signIn(this.form).then((()=>this.$router.replace({name:"home"}))).catch((()=>{this.errMessage="Invalid username or password"})),this.pending=""}}};const ea=(0,q.Z)(Xs,[["render",Js],["__scopeId","data-v-0c0d218d"]]);var sa=ea;const aa=e=>((0,i.dD)("data-v-657ad4d4"),e=e(),(0,i.Cn)(),e),ta={class:"main"},ra={class:"login-form"},na=aa((()=>(0,i._)("h2",{class:"heading-secondary ma-bt-lg"},"Create Your Account",-1))),ia={key:0,class:"alert alert--error"},oa={key:1,class:"alert alert--error"},la={class:"form__group"},ca=aa((()=>(0,i._)("label",{class:"form__label",for:"name"},"Your Name",-1))),ua={class:"form__group"},da=aa((()=>(0,i._)("label",{class:"form__label",for:"email"},"Email address",-1))),_a={class:"form__group"},ga=aa((()=>(0,i._)("label",{class:"form__label",for:"password"},"Password",-1))),ma={class:"form__group"},pa=aa((()=>(0,i._)("label",{class:"form__label",for:"password"},"Confirm password",-1))),va={class:"form__group"},wa={key:0,class:"btn btn--green",disabled:""},ha={key:1,class:"btn btn--green"};function fa(e,s,a,r,n,o){return(0,i.wg)(),(0,i.iD)("main",ta,[(0,i._)("div",ra,[na,n.errMessage?((0,i.wg)(),(0,i.iD)("div",ia,(0,c.zw)(n.errMessage),1)):(0,i.kq)("",!0),n.sucMessage?((0,i.wg)(),(0,i.iD)("div",oa,(0,c.zw)(n.sucMessage),1)):(0,i.kq)("",!0),(0,i._)("form",{class:"form form--login",onSubmit:s[4]||(s[4]=(0,t.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,i._)("div",la,[ca,(0,i.wy)((0,i._)("input",{class:"form__input",type:"text",placeholder:"Name","onUpdate:modelValue":s[0]||(s[0]=e=>n.name=e),required:""},null,512),[[t.nr,n.name]])]),(0,i._)("div",ua,[da,(0,i.wy)((0,i._)("input",{class:"form__input",type:"email",placeholder:"Email","onUpdate:modelValue":s[1]||(s[1]=e=>n.email=e),required:""},null,512),[[t.nr,n.email]])]),(0,i._)("div",_a,[ga,(0,i.wy)((0,i._)("input",{class:"form__input",type:"password",placeholder:"••••••••","onUpdate:modelValue":s[2]||(s[2]=e=>n.password=e),required:""},null,512),[[t.nr,n.password]])]),(0,i._)("div",ma,[pa,(0,i.wy)((0,i._)("input",{class:"form__input",type:"password",placeholder:"Confirm password","onUpdate:modelValue":s[3]||(s[3]=e=>n.confirmPassword=e),required:""},null,512),[[t.nr,n.confirmPassword]])]),(0,i._)("div",va,[n.pending?((0,i.wg)(),(0,i.iD)("button",wa,(0,c.zw)(n.pending),1)):((0,i.wg)(),(0,i.iD)("button",ha,"Sign up"))])],32)])])}var ba={name:"SignupView",data(){return{name:"",email:"",password:"",confirmPassword:"",errMessage:"",sucMessage:"",pending:""}},methods:{async handleSubmit(){const e={name:this.name,email:this.email,password:this.password,confirmPassword:this.confirmPassword};try{this.pending="Creating....",await n().post("users/signup",e),this.$router.push({name:"login"})}catch(s){this.errMessage="Unable to create account"}this.pending=""}}};const ka=(0,q.Z)(ba,[["render",fa],["__scopeId","data-v-657ad4d4"]]);var ya=ka;const xa={class:"main"},Da={key:0,class:"alert alert--error"},Sa={key:1,class:"alert alert--success"},Ma={class:"user-view"},Ua={class:"user-view__menu"},za=(0,i.uE)('<ul class="side-nav"><li class="side-nav--active"><a href="#"><svg class="reviews__star reviews__star--active"><use xlink:href="/images/icons.svg#icon-settings"></use></svg> settings </a></li><li><a href="#"><svg class="reviews__star reviews__star--active"><use xlink:href="/images/icons.svg#icon-briefcase"></use></svg> My booking </a></li><li><a href="#"><svg class="reviews__star reviews__star--active"><use xlink:href="/images/icons.svg#icon-star"></use></svg> My reviews </a></li></ul>',1),Ca={key:0,class:"admin-nav"},qa=(0,i._)("h5",{class:"admin-nav__heading"},"Admin",-1),Ea={class:"side-nav"},Pa=(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-map"})],-1),Ta=(0,i.Uk)(" Manage tours "),Oa=(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-users"})],-1),Na=(0,i.Uk)(" Manage users "),Wa=(0,i.uE)('<li><a href="#"><svg class="reviews__star reviews__star--active"><use xlink:href="/images/icons.svg#icon-star"></use></svg> Manage reviews </a></li><li><a href="#"><svg class="reviews__star reviews__star--active"><use xlink:href="/images/icons.svg#icon-briefcase"></use></svg> Manage bookings </a></li>',2),$a={class:"user-view__content"},Aa={class:"user-view__form-container"},Za=(0,i._)("h2",{class:"heading-secondary ma-bt-md"},"YOUR ACCOUNT SETTINGS",-1),Ia={class:"form__group"},La=(0,i._)("label",{for:"name",class:"form__label"},"Name",-1),Va={class:"form__group ma-bt-md"},Ya=(0,i._)("label",{class:"form__label",for:"email"},"Email address",-1),Ra={class:"form__group form__photo-upload"},Ka=["src","alt"],Ha=(0,i._)("label",{for:"photo"},"choose new photo",-1),ja={class:"form__group right"},Fa={key:0,class:"btn btn--small btn--green"},Ba={key:1,class:"btn btn--small btn--green",disabled:""},Ga=(0,i._)("div",{class:"line"}," ",-1),Qa={class:"user-view__form-container"},Ja=(0,i._)("h2",{class:"heading-secondary ma-bt-md"},"PASSWORD CHANGE",-1),Xa={key:0,class:"alert alert--success"},et={class:"form__group"},st=(0,i._)("label",{class:"form__label",for:"password-current"},"Current password",-1),at={class:"form__group"},tt=(0,i._)("label",{class:"form__label",for:"password"},"New password",-1),rt={class:"form__group"},nt=(0,i._)("label",{class:"form__label",for:"password-confirm"},"Confirm password",-1),it={class:"form__group right"},ot={class:"btn btn--small btn--green btn--save-password",ref:"btnPassword"};function lt(e,s,a,r,n,o){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("main",xa,[n.errMessage?((0,i.wg)(),(0,i.iD)("div",Da,(0,c.zw)(n.errMessage),1)):(0,i.kq)("",!0),n.sucMessage?((0,i.wg)(),(0,i.iD)("div",Sa,(0,c.zw)(n.sucMessage),1)):(0,i.kq)("",!0),(0,i._)("div",Ma,[(0,i._)("nav",Ua,[za,"admin"===e.user.role?((0,i.wg)(),(0,i.iD)("div",Ca,[qa,(0,i._)("ul",Ea,[(0,i._)("li",null,[(0,i.Wm)(l,{to:{name:"managetours"}},{default:(0,i.w5)((()=>[Pa,Ta])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(l,{to:{name:"manageusers"}},{default:(0,i.w5)((()=>[Oa,Na])),_:1})]),Wa])])):(0,i.kq)("",!0)]),(0,i._)("div",$a,[(0,i._)("div",Aa,[Za,(0,i._)("form",{class:"form form-user-data",onSubmit:s[3]||(s[3]=(0,t.iM)(((...e)=>o.updateUserData&&o.updateUserData(...e)),["prevent"]))},[(0,i._)("div",Ia,[La,(0,i.wy)((0,i._)("input",{class:"form__input",type:"text",required:"required","onUpdate:modelValue":s[0]||(s[0]=e=>n.form.name=e),placeholder:"Enter name"},null,512),[[t.nr,n.form.name]])]),(0,i._)("div",Va,[Ya,(0,i.wy)((0,i._)("input",{class:"form__input",type:"email",required:"required","onUpdate:modelValue":s[1]||(s[1]=e=>n.form.email=e),name:"email",placeholder:"Enter email"},null,512),[[t.nr,n.form.email]])]),(0,i._)("div",Ra,[(0,i._)("img",{class:"form__user-photo",src:`/images/users/${e.user.photo}`,alt:e.user.photo},null,8,Ka),(0,i._)("input",{onChange:s[2]||(s[2]=(...e)=>o.selectFile&&o.selectFile(...e)),class:"form__upload",type:"file",accept:"image/*",id:"photo",name:"photo"},null,32),Ha]),(0,i._)("div",ja,[n.isPending?((0,i.wg)(),(0,i.iD)("button",Ba,"Updating...")):((0,i.wg)(),(0,i.iD)("button",Fa,"Save settings"))])],32)]),Ga,(0,i._)("div",Qa,[Ja,n.update_password_show_alert?((0,i.wg)(),(0,i.iD)("div",Xa,(0,c.zw)(n.update_password_alert_message),1)):(0,i.kq)("",!0),(0,i._)("form",{class:"form form-user-password",onSubmit:s[7]||(s[7]=(0,t.iM)(((...e)=>o.updateUserPassword&&o.updateUserPassword(...e)),["prevent"]))},[(0,i._)("div",et,[st,(0,i.wy)((0,i._)("input",{class:"form__input",id:"password-current",type:"password",placeholder:"••••••••",required:"required",minlength:"8","onUpdate:modelValue":s[4]||(s[4]=e=>n.passwordCurrent=e)},null,512),[[t.nr,n.passwordCurrent]])]),(0,i._)("div",at,[tt,(0,i.wy)((0,i._)("input",{class:"form__input",id:"password",type:"password",placeholder:"••••••••",required:"required",minlength:"8","onUpdate:modelValue":s[5]||(s[5]=e=>n.password=e)},null,512),[[t.nr,n.password]])]),(0,i._)("div",rt,[nt,(0,i.wy)((0,i._)("input",{class:"form__input",id:"password-confirm",type:"password",placeholder:"••••••••",required:"required",minlength:"8","onUpdate:modelValue":s[6]||(s[6]=e=>n.confirmPassword=e)},null,512),[[t.nr,n.confirmPassword]])]),(0,i._)("div",it,[(0,i._)("button",ot," Save password ",512)])],32)])])])])}var ct={name:"UserDetails",data(){return{form:{name:"",email:"",image:""},passwordCurrent:"",password:"",confirmPassword:"",image:"",userData:[],isPending:!1,errMessage:"",sucMessage:"",update_password_in_submission:!1,update_password_show_alert:!1,update_password_alert_message:"Please wait! We are updating data."}},computed:{...(0,z.Se)({authenticated:"auth/authenticated",user:"auth/user"})},methods:{...(0,z.nv)({updatePassword:"auth/updatePassword"}),selectFile(e){const s=e.target.files[0];this.image=s},async updateUserData(){try{this.isPending=!0;const e=new FormData;e.append("image",this.image),e.append("name",this.form.name),e.append("email",this.form.email);const s=await n().patch("users/updateMe",e);this.userData=s.data.data.user,console.log(this.userData),"success"===s.data.status&&(this.sucMessage="Data Updated successfully!")}catch(e){this.errMessage="Could not update data! please, try again"}this.isPending=null,window.location.reload()},async updateUserPassword(){this.update_password_in_submission=!0,this.update_password_show_alert=!0,this.update_password_alert_message="please wait! updating.";try{this.$refs.btnPassword.textContent="Updating...";const e={passwordCurrent:this.passwordCurrent,password:this.password,confirmPassword:this.confirmPassword};await this.updatePassword(e)}catch(e){return this.update_password_in_submission=!1,void(this.update_password_alert_message="Error! could not update user's password.")}this.$refs.btnPassword.textContent="Save password",this.update_password_alert_message="Password updated successfully!.",window.location.reload()}},async mounted(){const e=await n().get("users/me"),{data:s}=e.data.data;this.form.name=s.name,this.form.email=s.email}};const ut=(0,q.Z)(ct,[["render",lt]]);var dt=ut;const _t={class:"main"},gt={key:0,class:"alert alert--error"},mt=(0,i._)("tr",null,[(0,i._)("th",null,[(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-map"})]),(0,i.Uk)(" Tours ")]),(0,i._)("th",null,[(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-trash"})]),(0,i.Uk)(" Actions ")])],-1),pt=["onClick"],vt=(0,i._)("br",null,null,-1);function wt(e,s,a,r,n,o){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("main",_t,[n.errMessage?((0,i.wg)(),(0,i.iD)("div",gt,(0,c.zw)(n.errMessage),1)):(0,i.kq)("",!0),(0,i._)("table",null,[mt,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tours,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id},[(0,i._)("td",null,[(0,i.Wm)(l,{to:{name:"tourdetails",params:{id:e._id}},class:"table-links"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,c.zw)(e.name),1)])),_:2},1032,["to"])]),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn--small btn--green btn--save-password",onClick:(0,t.iM)((s=>o.handleDelete(e._id)),["prevent"])},"Delete",8,pt)])])))),128))]),vt])}var ht={name:"ManageTours",beforeRouteEnter(e,s,a){Ns.Z.state.token?a():a({name:"login"})},data(){return{tours:[],errMessage:"",tourModal:!1}},async created(){try{const e=await n().get("tours");console.log(e.data.data.data);const s=e.data.data.data;this.tours=s,this.selectedImage=this.tours.imageCover}catch(e){e.value=e.message}},computed:{...(0,z.Se)({authenticated:"auth/authenticated",user:"auth/user"})},methods:{async handleDelete(e){try{await n()["delete"](`tours/${e}`),this.$router.push({name:"home"})}catch(s){this.errMessage="Could not update data! please, try again"}}}};const ft=(0,q.Z)(ht,[["render",wt]]);var bt=ft;const kt={class:"main"},yt={key:0,class:"alert alert--error"},xt={class:"table-responsive"},Dt=(0,i._)("tr",null,[(0,i._)("th",null,[(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-map"})]),(0,i.Uk)(" Users ")]),(0,i._)("th",null,[(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-map-pin"})]),(0,i.Uk)(" Photo ")]),(0,i._)("th",null,[(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-map-pin"})]),(0,i.Uk)(" User Role ")]),(0,i._)("th",null,[(0,i._)("svg",{class:"reviews__star reviews__star--active"},[(0,i._)("use",{"xlink:href":"/images/icons.svg#icon-trash"})]),(0,i.Uk)(" Actions ")])],-1),St=["src"],Mt=["onClick"],Ut=(0,i._)("br",null,null,-1);function zt(e,s,a,r,n,o){return(0,i.wg)(),(0,i.iD)("main",kt,[n.errMessage?((0,i.wg)(),(0,i.iD)("div",yt,(0,c.zw)(n.errMessage),1)):(0,i.kq)("",!0),(0,i._)("div",xt,[(0,i._)("table",null,[Dt,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.users,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id},[(0,i._)("td",null,[(0,i._)("p",null,(0,c.zw)(e.name),1)]),(0,i._)("td",null,[(0,i._)("img",{src:`/images/users/${e.photo}`,class:"nav__user-img",alt:"{{user.name}}"},null,8,St)]),(0,i._)("td",null,(0,c.zw)(e.role),1),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn--small btn--green btn--save-password",onClick:(0,t.iM)((s=>o.handleDelete(e._id)),["prevent"])},"Delete",8,Mt)])])))),128))])]),Ut])}var Ct={name:"ManageTours",beforeRouteEnter(e,s,a){Ns.Z.state.token?a():a({name:"login"})},data(){return{users:[],errMessage:"",maxPerPage:5}},async created(){try{const e=await n().get("users");console.log(e.data.data.data);const{data:s}=e.data.data;this.users=s}catch(e){e.value=e.message}},computed:{...(0,z.Se)({authenticated:"auth/authenticated",user:"auth/user"})},methods:{async handleDelete(e){try{await n()["delete"](`users/${e}`),this.$router.push({name:"login"})}catch(s){this.errMessage="Could not delete user! please, try again"}}}};const qt=(0,q.Z)(Ct,[["render",zt]]);var Et=qt;const Pt=[{path:"/",name:"home",component:xe},{path:"/login",name:"login",component:sa},{path:"/signup",name:"signup",component:ya},{path:"/tourdetails/:id",name:"tourdetails",component:As,props:!0},{path:"/userdetails",name:"userdetails",component:dt},{path:"/managetours",name:"managetours",component:bt},{path:"/manageusers",name:"manageusers",component:Et}],Tt=(0,R.p7)({history:(0,R.PO)("/"),routes:Pt});var Ot=Tt,Nt=a(4239);a(857),n().defaults.baseURL="https://natours-api-production-dbe8.up.railway.app/api/v1",Nt.Z.dispatch("auth/attempt",localStorage.getItem("token")).then((()=>{const e=(0,t.ri)(V);e.use(Nt.Z),e.use(Ot),e.mount("#app")}))},5433:function(e,s,a){var t=a(6265),r=a.n(t);s["Z"]={namespaced:!0,state:{token:null,user:null},getters:{authenticated(e){return e.token&&e.user},user(e){return e.user}},mutations:{SET_TOKEN:(e,s)=>{e.token=s},SET_USER:(e,s)=>{e.user=s}},actions:{async signIn({dispatch:e},s){const a=await r().post("users/login",s);return e("attempt",a.data.token)},async attempt({commit:e,state:s},a){if(a&&e("SET_TOKEN",a),s.token)try{const s=await r().get("users/me"),{data:a}=s.data.data;e("SET_USER",a)}catch(t){e("SET_TOKEN",null),e("SET_USER",null)}},async updatePassword({commit:e},s){try{const a=await r().patch("users/updateMyPassword",s),{token:t}=a.data;e("SET_TOKEN",t);const{user:n}=a.data.data;e("SET_USER",n)}catch(a){console.log(a)}},async signOut({commit:e}){return r().get("users/logout").then((()=>{e("SET_TOKEN",null),e("SET_USER",null)}))}}}},4239:function(e,s,a){var t=a(65),r=a(5433);s["Z"]=(0,t.MT)({state:{},mutations:{},getters:{},actions:{},modules:{auth:r.Z}})},857:function(e,s,a){a.r(s);var t=a(4239),r=a(6265),n=a.n(r);t.Z.subscribe((e=>{switch(e.type){case"auth/SET_TOKEN":e.payload?(n().defaults.headers.common.Authorization=`Bearer ${e.payload}`,localStorage.setItem("token",e.payload)):(n().defaults.headers.common.Authorization=null,localStorage.removeItem("token"));break}}))}},s={};function a(t){var r=s[t];if(void 0!==r)return r.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(s,t,r,n){if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],r=e[u][1],n=e[u][2];for(var o=!0,l=0;l<t.length;l++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](t[l])}))?t.splice(l--,1):(o=!1,n<i&&(i=n));if(o){e.splice(u--,1);var c=r();void 0!==c&&(s=c)}}return s}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[t,r,n]}}(),function(){a.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(s,{a:s}),s}}(),function(){a.d=function(e,s){for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(s){return 0===e[s]};var s=function(s,t){var r,n,i=t[0],o=t[1],l=t[2],c=0;if(i.some((function(s){return 0!==e[s]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var u=l(a)}for(s&&s(t);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},t=self["webpackChunknatour_app"]=self["webpackChunknatour_app"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=a.O(void 0,[998],(function(){return a(4024)}));t=a.O(t)})();
//# sourceMappingURL=app.43c852b2.js.map